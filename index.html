<!DOCTYPE html>
<html ng-app="omdb" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <p><b>Jasmine installation.</b></p>
    <ol>
        <li>Download jasmine 2.3.4 from <a href="https://github.com/jasmine/jasmine/releases">here</a>.</li>
        <li>Move folders and files to the root folder.</li>
        <li>Remove default test files.</li>
    </ol>

    <br><p><b>Initial Jasmine Exercise.</b></p>
    <ol>
        <li>Create <code>src/calculator.js</code> and <code>spec/calculator.spec.js</code></li>
        <li>Test the Add function of the calculator.js file:</li>
            <ol>
                <li>Write the test to fail: describe, it and <code>expect(add(1,2)).toBe(3);</code></li>
                <li>See the test fail in /SpecRunner.html</li>
                <li>Write the add function in calculator.js returning 0.</li>
                <li>See the test fail in /SpecRunner.html</li>
                <li>Complete the add function in calculator.js</li>
                <li>See the test succeed in /SpecRunner.html</li>
            </ol>
    </ol>


    <br><p><b>Karma installation.</b></p>
    <ol>
        <li>Run <code>npm init</code></li>
        <li>Run <code>npm install karma --save-dev</code></li>
        <li>If it is not installed yet, run <code>sudo npm install -g karma-cli</code></li>
        <li>Run <code>npm install karma-jasmine karma-chrome-launcher --save-dev</code></li>
        <li>Each browser adaptor for karma comes in a separate npm module. Initially, we choose to
        install karma-chrome-launcher.</li>
        <li>Run <code>karma init</code> (creates the karma config file). Options:</li>
            <ul>
                <li>Jasmine</li>
                <li>Do not use Require.js</li>
                <li>Chrome browser.</li>
                <li>Paths to src and spec files:</li>
                    <ul>
                        <li>src/**/*.js</li>
                        <li>spec/**/*.js</li>
                    </ul>
                <li>Karma to watch all files.</li>
            </ul>

        <li>Run <code>karma start karma.conf.js</code></li>
        <li>Add script in package.json: <code>"test": "./node_modules/karma/bin/karma start karma.conf.js"</code></li>
        <li>Run <code>npm install karma-phantomjs-launcher --save-dev</code></li>
        <li>Update karma.conf.js to use PhantomJS instead of Chrome.</li>
        <li>We can configure karma.conf.js to run the tests in several browsers at once (PhantomJS, Chrome, Firefox, etc).
         It is as easy as add the browsers comma-separated.</li>

    </ol>

    <br><p><b>Installation of AngularJS and ngMock.</b></p>
    <ol>
        <li>The ngMock documentation can be found <a href="https://docs.angularjs.org/api/ngMock">here</a>.</li>
        <li>Download AngularJS and the ngMock package, include links to the scripts in SpecRunner.html and include both
        files in karma.conf.js</li>
    </ol>

    <br><p><b>Karma before AngularJS.</b></p>
    <ul>
        <li>We will use the data of this open source <a href="http://www.omdbapi.com/">website</a></li>
        <li>To generate data to test, go to the search section of this website and enter "Star Wars". Copy
        the code generated by the search result.</li>
        <li>Create the file omdb/service.spec.js</li>
        <li>First approach without AngularJS:</li>
            <ol>
                <li>Create a variable movieData with an example movie.</li>
                <li>Create an empty service object (instead of the final AngularJS service).</li>
                <li><code>expect(service.search('Star Wars').toBe(movieData);</code></li>
            </ol>

        <li>See the test fail.</li>
        <li>Include the search function in the service object to make the test pass.</li>

    </ul>


    <br><p><b>Loading the module: angular.mock.module().</b></p>
    <ul>
        <li>The first task will be to instantiate the Angular module that holds the service. We do
        this using <code>angular.mock.module('moduleName')</code></li>
        <li>angular.mock.module() allows us to configure modules individually to be used in
        unit tests.</li>
        <li>angular.mock.module admits 3 kinds of parameters:</li>
        <ol>
            <li>a string: the name of the module to load. Does not allow to create custom components
            for the unit test.</li>
            <li>a anonymous function: the function creates a service using the factory function.</li>
            <li>an anomymous object: the object creates a service using the value function. Limitation:
            you cannot inject other services.</li>
        </ol>


    </ul>


    <br><p><b>Instantiating module components: the inject function.</b></p>
    <ul>
        <li>angular.mock.inject(function (_serviceName_)</li>
    </ul>


    <br><p><b>Creating the service file in AngularJS.</b></p>
    <ul>
        <li>Create the module.</li>
        <li>Create the service using the factory function.</li>
    </ul>


    <br><p><b>Notes:</b></p>
    <ul>
        <li>angular.mock.module() can be shortened to module().</li>
        <li>angular.mock.inject() can be shortened to inject()</li>
    </ul>








</body>
</html>